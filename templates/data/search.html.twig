{% extends 'base.html.twig' %}

{% block title %}Locating Data{% endblock %}

{% block body %}
    <div class="container shadow p-3 mb-5 bg-white rounded">
    {% for message in app.flashes('error') %}
        <div class="alert alert-warning">
            {{ message }}
        </div>
    {% endfor %}

        <form onclick="getOption()" action={{ path('search') }} method="post">
            <div class="form-group">
                <select onclick="getOption()" class="form-select mb-3 mt-3" id="selectOption" name="type">
                    <option onclick="getOption()" selected disabled >Select location type</option>
                    {% for key in keys %}
                        <option onclick="getOption()" > {{ key }}</option>
                    {% endfor %}
                </select>
            </div>

            <script type="text/javascript">
                function getOption() {
                    selectElement = document.querySelector('#selectOption');
                    output = selectElement.value;
                    document.querySelector('.input-group-text').textContent = output;
                }
            </script>

            <div class="input-group mb-3">
                <span class="input-group-text" > Location: </span>
                <input type="text" class="form-control" id="place" name="place" aria-describedby="basic-addon3">
            </div>

            <button type="submit" class="btn btn-dark">Search</button>

        </form>

        {% if stations is not empty %}
            <table class="locations table table-striped table-bordered p-3 mt-5" id="s_table">
                <thead id="s_thead">
                <tr class="table-primary" id="s_tr">
                    <th scope="col">Station</th>
                    <th scope="col">Country Code</th>
                    <th scope="col">Island</th>
                    <th scope="col">County</th>
                    <th scope="col">Place</th>
                    <th scope="col">Hamlet</th>
                    <th scope="col">Town</th>
                    <th scope="col">Municipality</th>
                    <th scope="col">State District</th>
                    <th scope="col">Administrative</th>
                    <th scope="col">State</th>
                    <th scope="col">Village</th>
                    <th scope="col">Region</th>
                    <th scope="col">Province</th>
                    <th scope="col">City</th>
                    <th scope="col">Locality</th>
                    <th scope="col">Postcode</th>
                    <th scope="col">Country</th>
                </tr>
                </thead>
                <tbody id="s_tbody">
                {% for data in stations %}
                    <tr>
                        {% if data.stationName is not empty %}
                            <td>{{ data.stationName }}</td>
                            <td>{{ data.countryCode }}</td>
                            <td>{{ data.island }}</td>
                            <td>{{ data.county }}</td>
                            <td>{{ data.place }}</td>
                            <td>{{ data.hamlet }}</td>
                            <td>{{ data.town }}</td>
                            <td>{{ data.municipality }}</td>
                            <td>{{ data.stateDistrict }}</td>
                            <td>{{ data.administrative }}</td>
                            <td>{{ data.state }}</td>
                            <td>{{ data.village }}</td>
                            <td>{{ data.region }}</td>
                            <td>{{ data.province }}</td>
                            <td>{{ data.city }}</td>
                            <td>{{ data.locality }}</td>
                            <td>{{ data.postcode }}</td>
                            <td>{{ data.country }}</td>
                        {% endif %}
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% endif %}

    </div>

{% endblock %}